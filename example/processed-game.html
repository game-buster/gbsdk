<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Awesome Game</title>
    
    <!-- GBSDK Meta Tags (injected at build time) -->
    <meta name="gbsdk:game-id" content="my-awesome-game">
    <meta name="gbsdk:game-title" content="My Awesome Game">
    <meta name="gbsdk:version" content="1.0.0">
    <meta name="gbsdk:framework" content="phaser">
    <meta name="gbsdk:category" content="arcade">
    <meta name="gbsdk:tags" content="puzzle,casual,mobile">
    <meta name="gbsdk:processed-at" content="2024-01-15T10:30:00.000Z">
    <meta name="gbsdk:config-hash" content="abc12345">
    
    <style>
        body {
            margin: 0;
            padding: 20px;
            font-family: Arial, sans-serif;
            background: #1a1a1a;
            color: white;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
        }
        
        .game-container {
            background: #333;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            max-width: 800px;
            width: 100%;
        }
        
        .game-canvas {
            width: 100%;
            max-width: 800px;
            height: 450px;
            background: #000;
            border: 2px solid #555;
            border-radius: 5px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            color: #888;
        }
        
        .controls {
            margin: 20px 0;
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            justify-content: center;
        }
        
        button {
            background: #0066cc;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
            transition: background 0.2s;
        }
        
        button:hover {
            background: #0052a3;
        }
        
        button:disabled {
            background: #666;
            cursor: not-allowed;
        }
        
        .status {
            background: #2a2a2a;
            padding: 15px;
            border-radius: 5px;
            margin: 10px 0;
            font-family: monospace;
            font-size: 12px;
            max-height: 200px;
            overflow-y: auto;
        }
        
        .info {
            background: #1a4a1a;
            padding: 10px;
            border-radius: 5px;
            margin: 10px 0;
            border-left: 4px solid #4CAF50;
        }
    </style>
    
    <!-- GBSDK Game Metadata (injected at build time) -->
    <script>
        // GBSDK Game Metadata (injected at build time)
        window.GBSDK_GAME_METADATA = {
            "gameId": "my-awesome-game",
            "gameTitle": "My Awesome Game",
            "category": "arcade",
            "tags": ["puzzle", "casual", "mobile"],
            "version": "1.0.0",
            "framework": "phaser",
            "hasCanvas": true,
            "gameSize": 2048576,
            "processedAt": "2024-01-15T10:30:00.000Z",
            "sdkVersion": "1.0.0",
            "configHash": "abc12345"
        };
        console.log('GBSDK: Game metadata loaded', window.GBSDK_GAME_METADATA);
    </script>
    
    <!-- GBSDK Script (injected at build time) -->
    <script src="https://unpkg.com/@gamebuster/gbsdk@late../dist/index.js"></script>
    
    <!-- GBSDK Auto-initialization (injected at build time) -->
    <script>
        // GBSDK Auto-initialization (injected at build time)
        window.addEventListener('DOMContentLoaded', function() {
            if (typeof GBSDK !== 'undefined' && GBSDK.GBSDK) {
                console.log('GBSDK: Auto-initializing...');
                
                window.gbsdk = new GBSDK.GBSDK();
                window.gbsdk.init().then(function() {
                    console.log('GBSDK: Auto-initialization complete');
                    
                    // Auto-track game start
                    window.gbsdk.gameStarted();
                    
                    // Make available globally for game code
                    window.GameBusterSDK = window.gbsdk;
                    
                    // Dispatch ready event
                    window.dispatchEvent(new CustomEvent('gbsdk-ready', { 
                        detail: { sdk: window.gbsdk } 
                    }));
                    
                    // Update UI
                    updateStatus('GBSDK initialized and ready!');
                    enableButtons();
                }).catch(function(error) {
                    console.error('GBSDK: Auto-initialization failed', error);
                    updateStatus('GBSDK initialization failed: ' + error.message);
                });
            } else {
                console.error('GBSDK: SDK not found, auto-initialization failed');
                updateStatus('GBSDK not found!');
            }
        });
    </script>
</head>
<body>
    <h1>üéÆ My Awesome Game</h1>
    <p>This is an example of a processed game with GBSDK auto-injected at build time.</p>
    
    <div class="info">
        <strong>‚úÖ GBSDK Features Automatically Enabled:</strong><br>
        ‚Ä¢ Zero configuration required<br>
        ‚Ä¢ Automatic game detection from metadata<br>
        ‚Ä¢ Dynamic config URL generation<br>
        ‚Ä¢ Auto-initialization on page load<br>
        ‚Ä¢ Game session tracking<br>
    </div>
    
    <div class="game-container">
        <div class="game-canvas" id="gameCanvas">
            üéÆ Game Canvas Area<br>
            <small>(Your game would render here)</small>
        </div>
        
        <div class="controls">
            <button id="interstitialBtn" onclick="showInterstitial()" disabled>
                Show Interstitial Ad
            </button>
            <button id="rewardedBtn" onclick="showRewarded()" disabled>
                Show Rewarded Ad
            </button>
            <button id="gameEndBtn" onclick="endGame()" disabled>
                End Game Session
            </button>
        </div>
        
        <div class="status" id="status">
            Waiting for GBSDK initialization...
        </div>
    </div>
    
    <div class="info">
        <strong>üîç Detected Game Metadata:</strong><br>
        <div id="metadata"></div>
    </div>
    
    <!-- Game Logic (Developer's original code) -->
    <script>
        // This is the developer's original game code
        // GBSDK is already available as window.gbsdk or window.GameBusterSDK
        
        let gameRunning = false;
        
        function updateStatus(message) {
            const status = document.getElementById('status');
            const timestamp = new Date().toLocaleTimeString();
            status.innerHTML = `[${timestamp}] ${message}<br>` + status.innerHTML;
        }
        
        function enableButtons() {
            document.getElementById('interstitialBtn').disabled = false;
            document.getElementById('rewardedBtn').disabled = false;
            document.getElementById('gameEndBtn').disabled = false;
        }
        
        function displayMetadata() {
            const metadata = window.GBSDK_GAME_METADATA;
            const metadataDiv = document.getElementById('metadata');
            
            if (metadata) {
                metadataDiv.innerHTML = `
                    Game ID: ${metadata.gameId}<br>
                    Title: ${metadata.gameTitle}<br>
                    Framework: ${metadata.framework}<br>
                    Category: ${metadata.category}<br>
                    Tags: ${metadata.tags ? metadata.tags.join(', ') : 'None'}<br>
                    Processed: ${metadata.processedAt}<br>
                    Detection: ${metadata.detectionMethod || 'injected'}
                `;
            }
        }
        
        async function showInterstitial() {
            if (!window.gbsdk) {
                updateStatus('GBSDK not available');
                return;
            }
            
            updateStatus('Showing interstitial ad...');
            
            try {
                const result = await window.gbsdk.showInterstitial();
                if (result.success) {
                    updateStatus('‚úÖ Interstitial ad completed successfully');
                } else {
                    updateStatus(`‚ùå Interstitial ad failed: ${result.reason}`);
                }
            } catch (error) {
                updateStatus(`‚ùå Interstitial ad error: ${error.message}`);
            }
        }
        
        async function showRewarded() {
            if (!window.gbsdk) {
                updateStatus('GBSDK not available');
                return;
            }
            
            updateStatus('Showing rewarded ad...');
            
            try {
                const result = await window.gbsdk.showRewarded();
                if (result.success) {
                    updateStatus('‚úÖ Rewarded ad completed - granting reward!');
                    grantReward();
                } else {
                    updateStatus(`‚ùå Rewarded ad failed: ${result.reason}`);
                }
            } catch (error) {
                updateStatus(`‚ùå Rewarded ad error: ${error.message}`);
            }
        }
        
        function grantReward() {
            updateStatus('üéÅ Reward granted: +100 coins!');
            // Your reward logic here
        }
        
        function endGame() {
            if (!window.gbsdk) {
                updateStatus('GBSDK not available');
                return;
            }
            
            window.gbsdk.gameEnded();
            updateStatus('üèÅ Game session ended');
            
            // Show interstitial ad after game ends
            setTimeout(() => {
                showInterstitial();
            }, 1000);
        }
        
        // Listen for GBSDK ready event
        window.addEventListener('gbsdk-ready', function(event) {
            updateStatus('üöÄ GBSDK ready event received');
            displayMetadata();
        });
        
        // Initialize page
        document.addEventListener('DOMContentLoaded', function() {
            displayMetadata();
            updateStatus('Page loaded, waiting for GBSDK...');
        });
    </script>
</body>
</html>
